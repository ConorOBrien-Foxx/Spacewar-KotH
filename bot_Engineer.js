function Engineer_setup(t){return {c:t,C:"red0blue".split(0)[+(t=="red")],d:function(x1,y1,x2,y2){return Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2))},enemyDist:function(g){return b.d(g[b.c+"_x"],g[b.c+"_y"],g[b.C+"_x"],g[b.C+"_y"]);},hS:function(g){return b.d(g.sun_x,g.sun_y,g[b.c+"_x"],g[b.c+"_y"])<50},hSm:function(g){/*get closest missile*/var r=(g.missiles||[{x:10000,y:10000}]).reduce(function(p,c){return Math.min(b.d(c.x,c.y,g[b.c+"_x"],g[b.c+"_y"]),p)},Infinity);return r<18;},dF:function(g){var a=Math.degrees(Math.atan2(g[b.C+"_y"]-g[b.c+"_y"],g[b.C+"_x"]-g[b.c+"_x"]));var tP = (g[b.c+"_rot"]+360-a)%360;return [a,tP];},lOr:function(g,b){var tP=b.dF(g)[1];return 90<tP&&tP<270?"turn left":"turn right";},thrust:function(g){return Math.abs(b.dF(g)-g[b.c+"_rot"]);}}}

function Engineer_getActions(g,b){var a=[];/*are we too close to the sun or a missile?*/if(b.hS(g)||b.hSm(g))actions.push("hyperspace");/*should we fire?*/if(b.enemyDist(g)<200)actions.push("fire missile");/*direction function*/actions.push(b.lOr(g,b));	if(Math.random() < .7) actions.push("fire engine");return a;}
